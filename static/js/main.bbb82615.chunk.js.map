{"version":3,"sources":["theme/MaterialUI.tsx","layouts/SideMenu.tsx","contexts/Contexts.ts","components/parameter_settings/ParameterSettingsTab.tsx","utils/three/OrbitControls.js","utils/three/VRButton.js","components/scene/ThreeBaseScene.tsx","utils/three/ObjectFactory.tsx","components/scene/CoordinateAxisScene.tsx","components/scene/TestBoxPlaneScene.tsx","components/chart/chartjs/Scatter.tsx","types/Chart.ts","components/chart/ConfigurableChart.tsx","scene_settings/samples/free_falling/FreeFallingParameters.ts","pages/PhysicalSimulation.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["darkTheme","createTheme","palette","primary","light","main","dark","contrastText","secondary","type","drawerWidth","useStyles","makeStyles","theme","createStyles","root","display","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","width","marginLeft","easeOut","enteringScreen","menuButton","marginRight","spacing","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","padding","mixins","toolbar","justifyContent","content","flexGrow","contentShift","PersistentDrawerLeft","classes","useTheme","React","useState","open","setOpen","className","CssBaseline","AppBar","position","clsx","Toolbar","IconButton","color","onClick","edge","Typography","variant","noWrap","Drawer","anchor","paper","direction","Divider","List","to","style","ListItem","button","ListItemIcon","ListItemText","ThreeContext","createContext","ParameterContext","TabPanel","props","children","value","index","other","role","hidden","id","Box","p","a11yProps","backgroundColor","background","createParameterWidgets","params","category","filter","v","map","Paper","marginBottom","paddingLeft","paddingRight","name","parameterType","TextField","label","placeholder","defaultValue","margin","InputLabelProps","shrink","onChange","event","maxValue","minValue","Slider","min","max","step","valueLabelDisplay","ParameterSettingsTab","contextValue","useContext","setValue","uniqueCategories","Array","from","Set","values","console","log","Tabs","newValue","scrollButtons","minHeight","idx","Tab","minWidth","length","overflowY","height","window","innerHeight","Button","OrbitControls","object","domElement","undefined","warn","document","error","this","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","focus","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","prototype","Object","EventDispatcher","constructor","MapControls","call","VRButton","renderer","options","createElement","showWebXRNotFound","cursor","onmouseenter","onmouseleave","onclick","textContent","stylizeElement","border","borderRadius","font","textAlign","opacity","outline","zIndex","navigator","xr","isSessionSupported","then","supported","currentSession","onSessionStarted","session","onSessionEnded","setSession","requestSession","optionalFeatures","end","showEnterVR","message","isSecureContext","href","location","replace","innerHTML","textDecoration","addObject","obj","objects","i","obj2","tag","push","ThreeBaseScene","_lookAt","THREE","z","container","setContainer","scene","camera","antialias","bgColor","clock","cnt","setCnt","setOrbitControls","cameraPos","setSize","setClearColor","shadowMap","useEffect","appendChild","_orbitControls","setAnimationLoop","dt","getDelta","onUpdate","render","ReactDOM","body","createButton","remove","apply","ambientLight","spotLight","castShadow","onReset","ref","ObjectFactory","pos_x","pos_y","pos_z","side","texture_filepath","sphereRadius","sphereGeometry","matArgs","transparent","depthWrite","load","sphereMaterial","sphere","size_x","size_y","size_z","box","receiveShadow","rotation_x","rotation_y","rotation_z","size_h","size_w","planeGeometry","planeMaterial","plane","rotation","dir_x","dir_y","dir_z","headWidth","headLength","dir","pos","arrowHelper","material","sprite","tube","tubularSegments","radiusSegments","q","roughness","geometry","torus","CoordinateAxisScene","OF","createArrow","objType","TestBoxPlaneScene","createTorusKnot","createPlane","Scatter","styled","div","_data","labels","datasets","fill","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","data","forceUpdate","redraw","Component","ChartTypeList","headerWidgets","variables","numVariables","chartType","setChartType","variableX","variableY","variableZ","setVariableX","setVariableY","setVariableZ","Grid","item","xs","InputLabel","htmlFor","Select","fontSize","MenuItem","s","xyzSelect","variable","setVariable","ConfigurableChart","nv","numSelectableVariables","FreeFallingParameters","PhysicalSimulation","scenes","selectedScene","setSelectedScene","threeObjs","setThreeObjs","Container","maxWidth","md","lg","ListSubheader","Provider","innerWidth","App","basename","process","path","component","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bbb82615.chunk.js","sourcesContent":["import { createTheme } from '@material-ui/core/styles'\n\n\nexport const darkTheme = createTheme({\n  palette: {\n    primary: {\n      light: '#757ce8',\n      main: '#d32f2f',\n      // main: '#a82414',\n      dark: '#002884',\n      contrastText: '#fff',\n    },\n    secondary: {\n      light: '#ff7961',\n      main: '#651fff',\n      dark: '#ba000d',\n      contrastText: '#000',\n    },\n    type: \"dark\",\n  },\n});\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme, Theme, createStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListAltIcon from '@material-ui/icons/ListAlt';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { Link } from \"react-router-dom\";\n\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    appBar: {\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    hide: {\n      display: 'none',\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n    drawerPaper: {\n      width: drawerWidth,\n    },\n    drawerHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      padding: theme.spacing(0, 1),\n      // necessary for content to be below app bar\n      ...theme.mixins.toolbar,\n      justifyContent: 'flex-end',\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(2),\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      marginLeft: -drawerWidth,\n    },\n    contentShift: {\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n      marginLeft: 0,\n    },\n  }),\n);\n\nexport default function PersistentDrawerLeft() {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, open && classes.hide)}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Menu\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        className={classes.drawer}\n        variant=\"persistent\"\n        anchor=\"left\"\n        open={open}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <div className={classes.drawerHeader}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <List>\n          <Link to=\"/physical_simulation\" style={{ color: '#FFF' }}>\n            <ListItem button key=\"main_key\">\n              <ListItemIcon><ListAltIcon/></ListItemIcon>\n              <ListItemText primary=\"Physical Simulation\" />\n            </ListItem>\n          </Link>\n        </List>\n        <Divider />\n      </Drawer>\n      <main\n        className={clsx(classes.content, {\n          [classes.contentShift]: open,\n        })}\n      >\n        <div className={classes.drawerHeader} />\n      </main>\n    </div>\n  );\n}\n","import React from 'react';\nimport * as THREE from 'three';\nimport { Vec3, ThreeObjects } from '../types/Three';\nimport { Parameter } from '../types/Parameter';\n\n\nexport type ThreeContextValue = {\n  width: number,\n  height: number,\n  cameraPos: Vec3,\n  onObjectsChanged?: (objs: ThreeObjects) => void,\n  lookAt?: Vec3,\n  bgColor?: THREE.Color,\n  onUpdate?: (dt: number) => void,\n  objects?: ThreeObjects,\n};\nexport const ThreeContext = React.createContext<ThreeContextValue>({} as ThreeContextValue);\n\n\nexport type ParameterContextValue = {\n  params: Parameter[],\n}\nexport const ParameterContext = React.createContext<ParameterContextValue>({} as ParameterContextValue);\n","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Button from '@mui/material/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Slider from '@mui/material/Slider';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\nimport { Parameter, ParameterType } from '../../types/Parameter';\nimport { ParameterContext, ParameterContextValue } from '../../contexts/Contexts';\n\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: any;\n  value: any;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>\n          <Typography>{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nfunction a11yProps(index: any) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nconst createParameterWidgets = (params: Parameter[], category: string) => {\n  const categoryParams = params.filter(v => v.category === category);\n\n  return categoryParams.map(v => {\n    return (\n      <Paper style={{marginBottom: \"10px\", paddingLeft: \"10px\", paddingRight: \"20px\"}}>\n        <Typography>{v.name}</Typography>\n        {\n          (() => {\n            if (v.parameterType === \"NUMBER_IMPUT\") {\n              return (\n                <TextField\n                  id={v.id}\n                  label={v.id}\n                  // style={{ marginLeft: 8, marginRight: 8 }}\n                  placeholder={ v.defaultValue as string }\n                  defaultValue={ v.defaultValue as string }\n                  // fullWidth\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  variant=\"outlined\"\n                  onChange={(event: any) => { }}\n                />\n              )\n            } else if (v.parameterType === \"SLIDER_FLOAT\") {\n              const maxValue = v.maxValue ? v.maxValue : 0;\n              const minValue = v.minValue ? v.minValue : 0;\n              return (\n                <Slider\n                  defaultValue={v.defaultValue as number}\n                  min={minValue}\n                  max={maxValue}\n                  step={0.002*(maxValue-minValue)}\n                  aria-label=\"Default\"\n                  valueLabelDisplay=\"auto\"\n                  // style={{ marginLeft: \"20px\", paddingRight: \"30px\" }}\n                />\n              )\n            } else if (v.parameterType === \"SLIDER_INT\") {\n              return (\n                <Slider\n                  defaultValue={v.defaultValue as number}\n                  min={v.minValue}\n                  max={v.maxValue}\n                  aria-label=\"Default\"\n                  valueLabelDisplay=\"auto\"\n                  // style={{ marginLeft: \"20px\", paddingRight: \"30px\" }}\n                />\n              )\n            }\n          })()\n        }\n      </Paper>\n    )\n  })\n}\n\ntype Props = {\n}\n\nconst ParameterSettingsTab: React.FC<Props> = (props: Props) => {\n\n  const contextValue = React.useContext(ParameterContext);\n\n  const classes = useStyles();\n  const [value, setValue] = React.useState(0);\n\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n    setValue(newValue);\n  };\n\n  const uniqueCategories = Array.from((new Set(\n    contextValue.params.map(v => v.category)\n  ).values()))\n\n  console.log(uniqueCategories);\n\n  return (\n    <div>\n      {/* <Typography variant=\"h6\" align=\"left\" gutterBottom> */}\n        Parameter Settings\n      {/* </Typography> */}\n      <AppBar position=\"static\">\n        <Tabs\n          value={value}\n          onChange={handleChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"simple tabs example\"\n          style={{minHeight:\"10%\"}}\n        >\n          {\n            uniqueCategories.map((category, idx) => {\n              return (\n                <Tab label={category} {...a11yProps(idx)} style={{minWidth:\"20%\", minHeight:\"10%\"}}/>\n              )\n            })\n          }\n          <Tab label=\"Params1\" {...a11yProps(uniqueCategories.length)} style={{minWidth:\"20%\", minHeight:\"10%\"}}/>\n        </Tabs>\n      </AppBar>\n      {\n        uniqueCategories.map((category, idx) => {\n          return (\n            <TabPanel value={value} index={idx}>\n              <div style={{overflowY: 'scroll', height: 0.48*window.innerHeight, margin: '0px'}}>\n              {createParameterWidgets(contextValue.params, category)}\n              </div>\n            </TabPanel>\n          )\n        })\n      }\n      <TabPanel value={value} index={uniqueCategories.length}>\n        <div style={{overflowY: 'scroll', height: 0.48*window.innerHeight, margin: '0px'}}>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n          <div><Button>tab111</Button></div>\n        </div>\n      </TabPanel>\n      <Button variant='contained'>Apply Settings</Button>\n    </div>\n  )\n}\n\nexport default ParameterSettingsTab;\n","/* eslint-disable */\nimport {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// the target DOM element for key events\n\tthis._domElementKeyEvents = null;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().invert();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t}\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","class VRButton {\n\n\tstatic createButton( renderer, options ) {\n\n\t\tif ( options ) {\n\n\t\t\tconsole.error( 'THREE.VRButton: The \"options\" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.' );\n\n\t\t}\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tfunction onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\trenderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { VRButton };","import React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport * as THREE from 'three';\n\nimport { ThreeContext, ThreeContextValue } from '../../contexts/Contexts';\nimport { OrbitControls } from '../../utils/three/OrbitControls';\nimport { VRButton } from '../../utils/three/VRButton';\nimport { ThreeObject } from '../../types/Three';\n\n\n// export interface Props {\n//   width: number,\n//   height: number,\n//   cameraPos: PosVec3,\n//   onObjectsChanged?: (objs: ThreeObjects) => void,\n//   lookAt?: PosVec3,\n//   bgColor?: THREE.Color,\n//   onUpdate?: (dt: number) => void,\n//   objects?: ThreeObjects,\n// };\nexport interface Props {\n};\n\n\nexport const addObject = (contextValue: ThreeContextValue, obj: ThreeObject) => {\n  if (contextValue.objects === undefined) { return; }\n  for (let i = 0; i < contextValue.objects?.length; i++) {\n    const obj2 = contextValue.objects[i];\n    console.log(`${obj2.tag} : ${obj.tag}`)\n    if (obj2.tag === obj.tag) {\n      return;\n    }\n  }\n  contextValue.objects?.push(obj);\n}\n\n\nexport const clearScene = (contextValue: ThreeContextValue) => {\n  if (contextValue.objects === undefined) { return; }\n  contextValue.objects = [];\n}\n\n\nconst ThreeBaseScene: React.FC<Props> = (props: Props) => {\n  console.log('ThreeBaseScene')\n\n  const contextValue = React.useContext(ThreeContext);\n\n  const _lookAt = contextValue.lookAt === undefined ?\n        new THREE.Vector3(0, 0, 0) :\n        new THREE.Vector3(contextValue.lookAt.x, contextValue.lookAt.y, contextValue.lookAt.z);\n\n  const [container, setContainer] = React.useState<HTMLDivElement|null>(null);\n  const [scene, setScene] = React.useState<THREE.Scene>(new THREE.Scene());\n  const [camera, setCamera] = React.useState<THREE.PerspectiveCamera>(\n    new THREE.PerspectiveCamera(\n      45,\n      contextValue.width / contextValue.height,\n      0.1,\n      1000\n    )\n  );\n  const [lookAt, setLookAt] = React.useState<THREE.Vector3>(_lookAt);\n  const [renderer, setRenderer] = React.useState<THREE.WebGLRenderer>(new THREE.WebGLRenderer({ antialias: true }));\n  const [bgColor, setBgColor] = React.useState<THREE.Color>(\n    contextValue.bgColor === undefined ? new THREE.Color('#b4bad2') : contextValue.bgColor\n  );\n  const [clock, setClock] = React.useState<THREE.Clock>(new THREE.Clock());\n  const [cnt, setCnt] = React.useState<number>(0);\n  const [orbitControls, setOrbitControls] = React.useState<OrbitControls|null>(null);\n  // const [objects, setObjects] = React.useState<ThreeObjects>([]);\n\n  camera.position.x = contextValue.cameraPos.x;\n  camera.position.y = contextValue.cameraPos.y;\n  camera.position.z = contextValue.cameraPos.z;\n  camera.lookAt(new THREE.Vector3(lookAt.x, lookAt.y, lookAt.z));\n  // setCamera(camera); NG\n\n  renderer.setSize(contextValue.width, contextValue.height);\n  renderer.setClearColor(bgColor);\n  renderer.shadowMap.enabled = true;\n\n  const update = (dt: number): void => {\n    if (contextValue.onUpdate) {\n      contextValue.onUpdate(dt);\n    }\n  }\n\n  const onReset = (): void => {\n    // Reset objects\n    scene.remove.apply(scene, scene.children);\n    console.log(contextValue.objects)\n    if (contextValue.objects) {\n      contextValue.objects.map(obj => scene.add(obj.obj));\n    }\n\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);\n    scene.add(ambientLight);\n\n    const spotLight = new THREE.SpotLight(0xffffff, 2.0, 100, Math.PI / 4, 1);\n    spotLight.position.set(2, 7, 2);\n    spotLight.castShadow = true;\n    scene.add(spotLight);\n  }\n\n  useEffect(() => {\n    console.log('useeffect')\n    if (container) {\n      container.appendChild(renderer.domElement);\n      const _orbitControls = new OrbitControls(camera, container);\n      _orbitControls.target.set(0, 0, 0);\n      _orbitControls.update();\n      setOrbitControls(_orbitControls);\n    }\n    renderer.setAnimationLoop(() => {\n      setCnt(cnt+1);\n      update(clock.getDelta());\n      renderer.render(scene, camera);\n    })\n    ReactDOM.render(<div id='vr_button'/>, document.body.appendChild(VRButton.createButton( renderer )));\n  }, [container, clock, renderer, scene, camera])\n\n  useEffect(() => {\n    console.log('useeffect2')\n    onReset();\n  }, [contextValue.objects])\n\n  return (\n    <div>\n      <div\n        style={{ width: contextValue.width, height: contextValue.height }}\n        ref={(container) => { setContainer(container) }}\n      />\n      <div id='vr_button'/>\n    </div>\n  )\n}\n\nexport default ThreeBaseScene;\n","import * as THREE from 'three';\n\n\nexport class ObjectFactory {\n\n  static createSphere(\n    pos_x: number = 0.0,\n    pos_y: number = 0.0,\n    pos_z: number = 0.0,\n    radius: number = 1.0,\n    opacity: number = 1.0,\n    color: number | string = 0x22DD22,\n    side: THREE.Side = THREE.FrontSide,\n    texture_filepath?: string,\n  ): THREE.Mesh {\n    const sphereRadius = radius;\n    const sphereGeometry = new THREE.SphereGeometry(sphereRadius, 20, 20);\n    let matArgs: any = {\n      color: color,\n      opacity: opacity,\n      transparent: true,\n      side: side,\n      depthWrite: false\n    };\n    if (texture_filepath !== undefined) {\n      matArgs['map'] = (new THREE.TextureLoader()).load(texture_filepath);\n    }\n    const sphereMaterial = new THREE.MeshLambertMaterial(matArgs);\n    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n\n    sphere.position.x = pos_x;\n    sphere.position.y = pos_y;\n    sphere.position.z = pos_z;\n    sphere.castShadow = true;\n\n    return sphere;\n  }\n\n  static createBox(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    size_x: number = 1.0,\n    size_y: number = 1.0,\n    size_z: number = 1.0,\n    opacity: number = 1.0,\n    color: number | string = 0xff0000,\n    side: THREE.Side = THREE.FrontSide,\n    texture_filepath?: string,\n  ): THREE.Mesh {\n    let matArgs: any = {\n      color: color,\n      opacity: opacity,\n      transparent: true,\n      side: side,\n      depthWrite: false\n    };\n    if (texture_filepath !== undefined) {\n      matArgs['map'] = (new THREE.TextureLoader()).load(texture_filepath);\n    }\n    const box = new THREE.Mesh(\n        new THREE.BoxGeometry(size_x, size_y, size_z),\n        new THREE.MeshStandardMaterial(matArgs)\n    );\n    box.receiveShadow = true;\n\n    box.position.set(pos_x, pos_y, pos_z);\n    return box;\n  }\n\n  static createPlane(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    rotation_x: number = -0.5*Math.PI,\n    rotation_y: number = 0,\n    rotation_z: number = 0,\n    opacity: number = 1.0,\n    color: number | string = 0xffffff,\n    size_h: number = 3,\n    size_w:number = 3,\n    side: THREE.Side = THREE.DoubleSide,\n    texture_filepath?: string,\n  ): THREE.Mesh {\n    const planeGeometry = new THREE.PlaneGeometry(size_w, size_h, 1, 1);\n    let matArgs: any = {\n      color: color,\n      opacity: opacity,\n      transparent: true,\n      side: side\n    };\n    if (texture_filepath !== undefined) {\n      matArgs['map'] = (new THREE.TextureLoader()).load(texture_filepath);\n    }\n    const planeMaterial = new THREE.MeshStandardMaterial(matArgs);\n    const plane = new THREE.Mesh(planeGeometry, planeMaterial);\n    plane.receiveShadow = true;\n    plane.castShadow = true;\n\n    plane.rotation.set(rotation_x, rotation_y, rotation_z);\n    plane.position.set(pos_x, pos_y, pos_z);\n\n    return plane;\n  }\n\n  static createArrow(\n    name: string,\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    dir_x: number = 0,\n    dir_y: number = 1,\n    dir_z: number = 0,\n    rotation_x: number = -Math.PI,\n    rotation_y: number = 0,\n    rotation_z: number = 0,\n    length: number = 0.8,\n    color: number | string = 0x00ff00,\n    headWidth: number = 0.3,\n    headLength: number = 0.3\n  ): THREE.ArrowHelper {\n    const dir = new THREE.Vector3(dir_x, dir_y, dir_z);\n    const pos = new THREE.Vector3(pos_x, pos_y, pos_z);\n    const arrowHelper = new THREE.ArrowHelper(dir, pos, length, color,\n                                              headWidth, headLength);\n    arrowHelper.name = name;\n    arrowHelper.rotation.x = rotation_x;\n    arrowHelper.rotation.y = rotation_y;\n    arrowHelper.rotation.z = rotation_z;\n\n    return arrowHelper;\n  }\n\n  static createSprite(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    scale: number = 0.2,\n    color: number | string = 0x0000ee,\n  ): THREE.Sprite {\n    const material = new THREE.SpriteMaterial({color: color});\n    const sprite = new THREE.Sprite(material);\n    sprite.position.x = pos_x;\n    sprite.position.y = pos_y;\n    sprite.position.z = pos_z;\n    sprite.scale.x = scale;\n    sprite.scale.y = scale;\n    sprite.scale.z = scale;\n\n    return sprite;\n  }\n\n  static createTorusKnot(\n    pos_x: number = 0,\n    pos_y: number = 0,\n    pos_z: number = 0,\n    radius: number = 1,\n    tube: number = 0.4,\n    tubularSegments: number = 64,\n    radiusSegments: number = 8,\n    p: number = 2,\n    q: number = 3,\n    opacity: number = 1.0,\n    color: number | string = 0x6699FF,\n    roughness: number = 0.5,\n    side: THREE.Side = THREE.FrontSide,\n    texture_filepath?: string,\n  ): THREE.Mesh {\n    const geometry = new THREE.TorusKnotGeometry(\n      radius, tube, tubularSegments, radiusSegments, p, q\n    )\n    let matArgs: any = {\n      color: color,\n      opacity: opacity,\n      transparent: true,\n      side: side,\n      roughness: roughness,\n    };\n    if (texture_filepath !== undefined) {\n      matArgs['map'] = (new THREE.TextureLoader()).load(texture_filepath);\n    }\n    const material = new THREE.MeshStandardMaterial(matArgs);\n    const torus = new THREE.Mesh(geometry, material);\n    torus.receiveShadow = true;\n    torus.castShadow = true;\n    torus.position.set(pos_x, pos_y, pos_z);\n    return torus\n  }\n\n}\n\nexport default ObjectFactory;\n","import React, { useEffect } from 'react';\nimport * as THREE from 'three';\n\nimport ThreeBaseScene, { addObject } from './ThreeBaseScene';\nimport { ThreeContext, ThreeContextValue } from '../../contexts/Contexts';\nimport { ObjectFactory as OF } from '../../utils/three/ObjectFactory';\n\n\nexport interface Props {\n};\n\n\nconst CoordinateAxisScene: React.FC<Props> = (props: Props) => {\n\n  const contextValue = React.useContext(ThreeContext);\n  addObject(contextValue, {\n    tag: 'x_axis',\n    obj: OF.createArrow(\n      'x_axis',\n      0, 0, 0,\n      1.0, 0.0, 0.0,\n      0.5*Math.PI, 0.0, 0,\n      6.0, //this._axis_length,\n      0xFF0000,\n      0.5, //this._axis_length/5,\n      0.5, //this._axis_length/5,\n    ),\n    objType: 'arrow'\n  })\n  addObject(contextValue, {\n    tag: 'y_axis',\n    obj: OF.createArrow(\n      'y_axis',\n      0, 0, 0,\n      0.0, 1.0, 0.0,\n      0, 0.5*Math.PI, 0,\n      6.0,\n      0x00FF00,\n      0.6, 0.6,\n    ),\n    objType: 'arrow'\n  })\n  addObject(contextValue, {\n    tag: 'z_axis',\n    obj: OF.createArrow(\n      'z_axis',\n      0, 0, 0,\n      0.0, 0.0, 1.0,\n      0, 0, 0.5*Math.PI,\n      6.0,\n      0x0000FF,\n      0.6, 0.6,\n    ),\n    objType: 'arrow'\n  })\n\n  return (\n    <div>\n      <ThreeBaseScene />\n    </div>\n  )\n}\n\nexport default CoordinateAxisScene;\n","import React, { useEffect } from 'react';\nimport * as THREE from 'three';\n\nimport { addObject } from './ThreeBaseScene';\nimport CoordinateAxisScene from './CoordinateAxisScene';\nimport { ThreeContext, ThreeContextValue } from '../../contexts/Contexts';\nimport { ObjectFactory as OF } from '../../utils/three/ObjectFactory';\n\n\nexport interface Props {\n};\n\n\nconst TestBoxPlaneScene: React.FC<Props> = (props: Props) => {\n\n  const contextValue = React.useContext(ThreeContext);\n\n  addObject(contextValue, {\n    tag: 'box1',\n    obj: OF.createTorusKnot(\n      0.0, 0.2, 0.0,\n      // 0.1, 1, 6.7, 10, 3, 40\n    ),\n    objType: 'box'\n  });\n  addObject(contextValue, {\n    tag: 'plane1',\n    obj: OF.createPlane(\n      0, 0, 0,\n      -0.5*Math.PI, 0, 0,\n      0.6,\n      0xffffff,\n      10, 10,\n      THREE.DoubleSide,\n      'https://threejsfundamentals.org/threejs/resources/images/wall.jpg'\n    ),\n    objType: 'plane'\n  });\n\n  return (\n    <div>\n      <CoordinateAxisScene />\n    </div>\n  )\n}\n\nexport default TestBoxPlaneScene;\n","import React from 'react';\nimport { Scatter as ChartScatter } from 'react-chartjs-2';\nimport styled from 'styled-components';\n\n\nconst StyledChart = styled.div`\n  // position: fixed;\n  top: 0;\n  right: 0;\n  width: 40%;\n`\n\ninterface Data {\n  x: number,\n  y: number,\n};\n\nexport type DataType = Data[];\n\ntype Props= {}\n\nexport class Scatter extends React.Component<Props> {\n\n  private _data: any = null;\n\n  constructor(props: Props) {\n    super(props);\n\n    this._data = {\n      labels: ['Scatter'],\n      datasets: [\n        {\n          label: 'scatter',\n          fill: true,\n          backgroundColor: 'rgba(75,192,192,0.4)',\n          pointBorderColor: 'rgba(75,192,192,1)',\n          pointBackgroundColor: '#fff',\n          pointBorderWidth: 2,\n          pointHoverRadius: 1,\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\n          pointHoverBorderWidth: 2,\n          pointRadius: 5,\n          pointHitRadius: 5,\n          data: [\n            { x: 0, y: 0 },\n          ]\n        }\n      ]\n    };\n\n  }\n\n  componentDidMount(): void {\n    this._data.datasets[0].data = [\n      {x: 0, y: 0},\n      {x: 1, y: 1},\n      {x: 2, y: 2},\n      {x: 3, y: 3},\n      {x: 4, y: 4},\n    ];\n\n    this.forceUpdate();\n  }\n\n  setData(data: DataType) {\n    this._data.datasets[0].data = data;\n    this.forceUpdate();\n  }\n\n  render() {\n    return (\n      // <StyledChart>\n        <ChartScatter data={this._data} redraw />\n      // </StyledChart>\n    )\n  }\n}\n\nexport default Scatter;\n","\n\nexport type ChartType =\n  \"SCATTER_2D\" |\n  \"SCATTER_3D\" |\n  \"LINE_2D\" |\n  \"LINE_3D\" |\n  \"HISTOGRAM\"\n;\n\nexport const ChartTypeList = [\n  \"SCATTER_2D\",\n  \"SCATTER_3D\",\n  \"LINE_2D\",\n  \"LINE_3D\",\n  \"HISTOGRAM\"\n]\n","import React, { useState } from 'react';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Grid, { GridSize } from '@material-ui/core/Grid';\n\nimport { ChartType, ChartTypeList } from '../../types/Chart';\nimport Scatter from './chartjs/Scatter';\n\n\nexport interface Props {\n  data: any,\n  variables: string[],\n};\n\n\nconst chart = (chartType: ChartType|null) => {\n  return (\n    <Scatter></Scatter>\n  )\n}\n\nconst numSelectableVariables = (chartType: ChartType|null|\"\"): number => {\n  if (chartType === null || chartType === \"\") {\n    return 0;\n  } else if (chartType === \"LINE_3D\" || chartType === \"SCATTER_3D\") {\n    return 3;\n  } else {\n    return 2;\n  }\n}\n\nconst headerWidgets = (\n  variables: string[],\n  numVariables: number,\n  chartType: ChartType|null|\"\",\n  setChartType: React.Dispatch<React.SetStateAction<ChartType | null>>,\n  variableX: string,\n  variableY: string,\n  variableZ: string,\n  setVariableX: React.Dispatch<React.SetStateAction<string>>,\n  setVariableY: React.Dispatch<React.SetStateAction<string>>,\n  setVariableZ: React.Dispatch<React.SetStateAction<string>>,\n) => {\n  if (numVariables === 0) {\n    return (\n      <Grid container spacing={0} direction=\"row\">\n        <Grid item xs={4}>\n          <InputLabel htmlFor=\"chart-type-select\">Chart Type</InputLabel>\n          <Select\n            onChange={(event: SelectChangeEvent) => {\n              setChartType(event.target.value as ChartType);\n            }}\n            // displayEmpty\n            label=\"chart_type\"\n            value={chartType as string}\n            variant=\"outlined\"\n            style={{height: \"30px\", fontSize: \"0.7em\"}}\n          >\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            {ChartTypeList.map((v) => (\n              <MenuItem value={v}>\n                {v}\n              </MenuItem>\n            ))}\n          </Select>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  const s = 12 / (numVariables+1);\n  const xyzSelect = (label: string, variable: string, setVariable: React.Dispatch<React.SetStateAction<string>>) => {\n    return (\n      <Select\n        onChange={(event: SelectChangeEvent) => {\n          setVariable(event.target.value);\n        }}\n        // displayEmpty\n        label={label}\n        value={variable}\n        variant=\"outlined\"\n        style={{height: \"30px\"}}\n      >\n        {variables.map((v) => (\n          <MenuItem value={v}>\n            {v}\n          </MenuItem>\n        ))}\n      </Select>\n    )\n  }\n\n  return (\n    <Grid container spacing={0} direction=\"row\">\n      <Grid item xs={s as GridSize}>\n        <InputLabel htmlFor=\"chart-type-select\">Chart Type</InputLabel>\n        <Select\n          onChange={(event: SelectChangeEvent) => {\n            setChartType(event.target.value as ChartType);\n          }}\n          // displayEmpty\n          label=\"chart_type\"\n          value={chartType as string}\n          variant=\"outlined\"\n          style={{height: \"30px\"}}\n        >\n          <MenuItem value=\"\">\n            <em>None</em>\n          </MenuItem>\n          {ChartTypeList.map((v) => (\n            <MenuItem value={v}>\n              {v}\n            </MenuItem>\n          ))}\n        </Select>\n      </Grid>\n      <Grid item xs={s as GridSize}>\n        <InputLabel htmlFor=\"chart-type-select\">X</InputLabel>\n        {xyzSelect(\"variable_x\", variableX, setVariableX)}\n      </Grid>\n      {\n        (() => {\n          if (chartType !== \"HISTOGRAM\") {\n            return (\n              <Grid item xs={s as GridSize}>\n                <InputLabel htmlFor=\"chart-type-select\">Y</InputLabel>\n                {xyzSelect(\"variable_y\", variableY, setVariableY)}\n              </Grid>\n            )\n          }\n        })()\n      }\n      {\n        (() => {\n          if (numVariables === 3) {\n            return (\n              <Grid item xs={s as GridSize}>\n                <InputLabel htmlFor=\"chart-type-select\">Z</InputLabel>\n                {xyzSelect(\"variable_z\", variableZ, setVariableZ)}\n              </Grid>\n            )\n          }\n        })()\n      }\n    </Grid>\n  )\n}\n\n\nconst ConfigurableChart: React.FC<Props> = (props: Props) => {\n\n  const [chartType, setChartType] = useState<ChartType|null>(null);\n  const [variableX, setVariableX] = useState<string>(props.variables[0]);\n  const [variableY, setVariableY] = useState<string>(props.variables[0]);\n  const [variableZ, setVariableZ] = useState<string>(props.variables[0]);\n\n  const nv = numSelectableVariables(chartType);\n\n  return (\n    <div>\n      {headerWidgets(\n        props.variables, nv, chartType, setChartType,\n        variableX, variableY, variableZ,\n        setVariableX, setVariableY, setVariableZ\n      )}\n      {chart(chartType)}\n    </div>\n  )\n}\n\nexport default ConfigurableChart;\n","import { Parameter, ParameterType } from '../../../types/Parameter';\n\n\nexport const FreeFallingParameters: Parameter[] = [\n  {\n    category: \"GENERAL\",\n    name: \"重力加速度\",\n    id: \"gravitational_acceleration\",\n    parameterType: \"SLIDER_FLOAT\",\n    defaultValue: 9.8,\n    minValue: 0.0,\n    maxValue: 100,\n  },\n  {\n    category: \"GENERAL\",\n    name: \"初期位置(高さ)\",\n    id: \"initial_height\",\n    parameterType: \"NUMBER_IMPUT\",\n    defaultValue: 30,\n  },\n  {\n    category: \"GENERAL\",\n    name: \"地面の高さ\",\n    id: \"ground_height\",\n    parameterType: \"SLIDER_FLOAT\",\n    defaultValue: 0.0,\n    minValue: -40.0,\n    maxValue: 40.0,\n  },\n  {\n    category: \"GENERAL\",\n    name: \"ボールの半径\",\n    id: \"ball_radius\",\n    parameterType: \"SLIDER_FLOAT\",\n    defaultValue: 5.0,\n    minValue: 0.1,\n    maxValue: 50,\n  },\n  {\n    category: \"GENERAL\",\n    name: \"地面との反発係数\",\n    id: \"restitution_coefficient\",\n    parameterType: \"SLIDER_FLOAT\",\n    defaultValue: 0.8,\n    minValue: 0.0,\n    maxValue: 1,\n  },\n  {\n    category: \"GENERAL\",\n    name: \"空気抵抗係数\",\n    id: \"air_resistance_coefficient\",\n    parameterType: \"SLIDER_FLOAT\",\n    defaultValue: 0.0,\n    minValue: 0.0,\n    maxValue: 10.0,\n  },\n]\n","import React from 'react';\nimport { Container } from '@material-ui/core';\n// import Paper from '@mui/material/Paper';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListSubheader from '@mui/material/ListSubheader';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Button from '@mui/material/Button';\n\nimport SideMenu from '../layouts/SideMenu';\nimport ParameterSettingsTab from '../components/parameter_settings/ParameterSettingsTab';\nimport CoordinateAxisScene from '../components/scene/CoordinateAxisScene';\nimport TestBoxPlaneScene from '../components/scene/TestBoxPlaneScene';\nimport { ThreeContext, ParameterContext } from '../contexts/Contexts';\nimport { ThreeObjects } from '../types/Three';\nimport { Scatter } from '../components/chart/chartjs/Scatter';\nimport ConfigurableChart from '../components/chart/ConfigurableChart';\nimport { FreeFallingParameters } from '../scene_settings/samples/free_falling/FreeFallingParameters';\n\n\ntype Props = {\n}\n\nconst PhysicalSimulation: React.FC<Props> = (props: Props) => {\n\n  const [scenes, setScenes] = React.useState<string[]>([\"CoordinateAxisScene\", \"TestBoxPlaneScene\", \"Scene3\"]);\n  const [selectedScene, setSelectedScene] = React.useState<string>(\"TestBoxPlaneScene\");\n  const [threeObjs, setThreeObjs] = React.useState<ThreeObjects>([]);\n\n  return (\n    <div>\n      <SideMenu />\n      <Container maxWidth='xl'>\n        <Grid container spacing={2} direction=\"row\" alignItems=\"center\">\n          <Grid item xs={12} md={10} lg={10} style={{padding: \"0px 0px 0px 60px\"}}>\n            <InputLabel htmlFor=\"scene-select\">SCENE</InputLabel>\n            <Select\n              onChange={(event: SelectChangeEvent) => {\n                setThreeObjs([]);\n                setSelectedScene(event.target.value);\n              }}\n              // displayEmpty\n              label=\"Scene\"\n              value={selectedScene}\n              variant=\"outlined\"\n            >\n              <MenuItem value=\"\">\n                <em>None</em>\n              </MenuItem>\n              <ListSubheader style={{color: '#0000FF'}}>--Frontend Calculated--</ListSubheader>\n              {scenes.map((scene) => (\n                <MenuItem value={scene}>\n                  {scene}\n                </MenuItem>\n              ))}\n              <ListSubheader style={{color: '#0000FF'}}>--Backend Calculated--</ListSubheader>\n            </Select>\n          </Grid>\n          <Grid item xs={12} md={2} lg={2} style={{padding: \"0px 60px 0px 0px\"}}>\n            <Button variant=\"contained\">Run</Button>\n            <Button variant=\"contained\">Reset</Button>\n          </Grid>\n          <Grid item xs={12} md={8} lg={8}>\n            <Paper\n              style={{padding: \"10px 50px 30px\", margin: \"0px 0px 0px 40px\", height: 550}}\n            >\n              {`3DViewer / ${selectedScene}`}\n              <ThreeContext.Provider value={{\n                width: 0.55*window.innerWidth,\n                height: 0.6*window.innerHeight,\n                cameraPos: {x: 6, y: 6, z: 6},\n                objects: threeObjs,\n              }}>\n                {\n                  (() => {\n                    if (selectedScene === \"CoordinateAxisScene\") {\n                      return <CoordinateAxisScene/>\n                    } else if (selectedScene === \"TestBoxPlaneScene\") {\n                      return <TestBoxPlaneScene/>\n                    }\n                  })()\n                }\n              </ThreeContext.Provider>\n            </Paper>\n          </Grid>\n          <Grid item xs={12} md={4} lg={4}>\n            <Paper style={{padding: \"5px 5px 5px\", margin: \"0px 40px 0px 0px\", height: 550}}>\n              <ParameterContext.Provider value={{\n                params: FreeFallingParameters\n              }}>\n                <ParameterSettingsTab />\n              </ParameterContext.Provider>\n            </Paper>\n          </Grid>\n          {/* Chart */}\n          <Grid item xs={4}>\n            <Paper style={{padding: \"10px 10px 10px\", margin: \"0px 0px 0px 40px\", height: 300}}>\n              <ConfigurableChart data={0} variables={[\"time\", \"pos_x\"]}/>\n            </Paper>\n          </Grid>\n          <Grid item xs={4}>\n            <Paper style={{padding: \"10px 50px 10px\", margin: \"0px 0px 0px 0px\", height: 300}}>\n              Chart\n              <Scatter />\n            </Paper>\n          </Grid>\n          <Grid item xs={4}>\n            <Paper style={{padding: \"10px 10px 10px\", margin: \"0px 40px 0px 0px\", height: 300}}>\n              <ConfigurableChart data={0} variables={[\"time\", \"pos_x\"]}/>\n            </Paper>\n          </Grid>\n        </Grid>\n      </Container>\n    </div>\n  )\n}\n\nexport default PhysicalSimulation;\n","import { MuiThemeProvider } from '@material-ui/core/styles';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { darkTheme } from './theme/MaterialUI';\nimport PhysicalSimulation from './pages/PhysicalSimulation';\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <MuiThemeProvider theme={darkTheme}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <Switch>\n            <Route path=\"/\" component={PhysicalSimulation} exact />\n          </Switch>\n          <Switch>\n            <Route path=\"/physical_simulation\" component={PhysicalSimulation} exact />\n          </Switch>\n        </Router>\n      </MuiThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}